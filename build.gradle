apply plugin: 'java'
apply plugin: 'application'

group = 'org.free.ca'

mainClassName = 'org.free.ca.java.Entrypoint'

repositories {
    mavenCentral()
}

dependencies {
    compile 'info.picocli:picocli:4.2.0'
    annotationProcessor 'info.picocli:picocli-codegen:4.2.0'
    compileOnly 'org.projectlombok:lombok:1.18.12'
    annotationProcessor 'org.projectlombok:lombok:1.18.12'
    implementation('org.bouncycastle:bcprov-jdk15on:1.65')
    implementation('org.bouncycastle:bcprov-ext-jdk15on:1.65')
    implementation('commons-validator:commons-validator:1.6')
    implementation('org.apache.logging.log4j:log4j-api:2.5')
    implementation('org.apache.logging.log4j:log4j-core:2.5')
    implementation('org.bouncycastle:bcpkix-jdk15on:1.65')
    testCompile group: 'junit', name: 'junit', version: '4.12'
}

compileJava {
    options.compilerArgs += ["-Aproject=${project.group}/${project.name}"]
}

mainClassName = "org.free.Entrypoint"

jar.archiveBaseName = "ca-gen"

jar {
  manifest { 
    attributes "Main-Class": "$mainClassName"
  }  

  from {
    configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
  }
}